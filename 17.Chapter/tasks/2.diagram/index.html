<canvas width="500" height="700" ></canvas>
<script>
    const results = [
        {name: "Satisfied", count: 1043, color: "lightblue"},
        {name: "Neutral", count: 563, color: "lightgreen"},
        {name: "Unsatisfied", count: 510, color: "pink"},
        {name: "No comment", count: 175, color: "silver"}
    ];

    let cx = document.querySelector("canvas").getContext("2d");
    cx.font = "18px Times";
    
    /**
     * Строит диаграмму по данным arData радиусом rad и координатами центра x и y
     * @param {array} arData - массив объектов с данными сегмента диаграммы
     * @param {number} x - целое число, координата по оси x центра диаграммы
     * @param {number} y - целое число, координата по оси y центра диаграммы
     * @param {number} rad - целое число, радиус диаграммы
     * @return {undefined} - ничего не возвращает (просто строит диаграмму)
     */
    function createDiagram(arData, x, y, rad) {
        let total = arData.reduce((sum, {count}) => sum + count, 0);

        // Start at the top
        let currentAngle = -0.5 * Math.PI;
        for (let result of arData) {
            let sliceAngle = (result.count / total) * 2 * Math.PI;
            cx.beginPath();
            // center=100,100, radius=100
            // from current angle, clockwise by slice's angle
            cx.arc(x, y, rad,
                currentAngle, currentAngle + sliceAngle);

            textForDiargam(result, rad, currentAngle, currentAngle + sliceAngle);
            currentAngle += sliceAngle;
            cx.lineTo(x, y);
            cx.fillStyle = result.color;
            cx.fill();
        }
    }

    function textForDiargam(objData, rad, startAngle, endAngle) {
        console.log(startAngle);
        console.log(endAngle);
        console.log("-----------------------------------");
    }
    createDiagram(results, 200, 200, 100);
</script>
